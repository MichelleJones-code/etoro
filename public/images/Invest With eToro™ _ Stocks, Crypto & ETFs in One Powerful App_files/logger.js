((u,s)=>{var g={production:"https://etorologsapi.etoro.com/api/v2/monitoring?applicationIdentifier=",staging:"http://etoro-logs-api-staging.cloudapp.net/api/v2/monitoring?applicationIdentifier="},o=["info","error","warn","debug"],c=["LP","innerPages","HomePage","registrationFrom","RAF"],l="etoroMarketingUserSession",p="marketingSites";function x(){return"xxxxtxxx-xxxx-4xxx-yxxx-xxxxxxtxxxxx".replace(/t/g,function(e){return((new Date).getTime()%16).toString(16)}).replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}function d(e,t){for(var n in t)e[n]=t[n]}function f(e){e=e.prototype.SessionGuid;return e||x()}var h=[];function e(l){l.debugMsg("Info: catchJSErrors");u.onerror=function(e,t,n,o){var o=o||u.event&&u.event.errorCharacter,r=[];try{for(var a=arguments.callee.caller;a;)r.push(a.name),a=a.caller}catch(e){}try{var s=e+" from "+JSON.stringify(r)+" | file: "+t+": "+n+" | column: "+o,g=l,c=!1;for(i=0;i<h.length;i++)h[i].msg==s&&(c=!0,h[i].count++);c||h.push({msg:s,count:1}),setTimeout(function(){var e=[];if(0!=h.length){for(i=0;i<h.length;i++)e.push({Level:"error",Message:"JS error/exception",errorMessage:h[i].msg,errorMessageCount:h[i].count});g.send(e),h=[]}},2e3)}catch(e){l.debugMsg("Faild to parse JS error ",e)}return!1}}function r(e){return e<=0?0:e<200?10*Math.ceil(e/10):e<1e4?100*Math.ceil(e/100):1e3*Math.ceil(e/1e3)}var v,m=function(e,t,n,o,r,i){let a=this;a.config={ApplicationIdentifier:p,ApplicationVersion:t,AppName:e,Categories:-1<c.indexOf(n)?n:"marketingUnknown",SessionGuid:f(m),UserSessionGuid:(()=>{if(!localStorage)return null;try{return localStorage.getItem(l)||localStorage.setItem(l,x()),localStorage.getItem(l)}catch(e){return null}})(),Location:location.href,Message:null,Level:"info"},d(this.config,o),a.debug=r,a.environment=(t=g[i]?i:"production",a.debugMsg("environment: "+t),t),a.init()};m.prototype.debugMsg=function(){this.debug&&Function.prototype.bind.call(console.warn,console).apply(this,arguments)},m.prototype.createEvent=function(e){var t,n;return e.Level&&e.Message?([t]=performance.getEntriesByType("navigation"),d(n=function e(t){if("[object Array]"===Object.prototype.toString.call(t))for(var n=[],o=0;o<t.length;o++)n[o]=e(t[o]);else{if("object"!=typeof t)return t;var r,n={};for(r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]))}return n}(this.config),e),n.Level=-1<o.indexOf(n.Level)?n.Level:"info",n.DomComplete=(()=>{let t;try{var[e]=performance.getEntriesByType("navigation");t=r(e.domComplete)}catch(e){t=e.message}return t})(),n.DOMLoadTime=(()=>{let t;try{var[e]=performance.getEntriesByType("navigation");t=r(e.domContentLoadedEventEnd)}catch(e){t=e.message}return t})(),"Page View"!==e.Message&&"Page Loaded"!==e.Message||(n.TTFB=(()=>{let t;try{var[e]=performance.getEntriesByType("navigation");if(e.responseStart<0)return-1;t=r(e.responseStart)}catch(e){t=e.message}return t})(),n.domContentLoadedEventStart=r(t.domContentLoadedEventStart),n.loadEventStart=r(t.loadEventStart),n.loadEventEnd=r(t.loadEventEnd),n.responseEnd=r(t.responseEnd)),n.ClientDateTime=(new Date).toISOString().split(".")[0]+"Z",n):(this.debugMsg("Missing 'Level' or 'Message'"),null)},m.prototype.send=function(e){var r=this;if(e&&e.length&&"object"==typeof e){var t=[];for(k=0;k<e.length;k++){var n=r.createEvent(e[k]);n&&t.push(n)}if(0==t.length)r.debugMsg("no events was passed");else{try{objToUrlParm=encodeURIComponent(JSON.stringify(t))}catch(e){return}fullUrlGetMethod=r.logUrl+"&LogEvents="+objToUrlParm,this.http("POST",r.logUrl,{},"",null,JSON.stringify({LogEvents:t}),function(e,t){var n,o;e||(r.debugMsg("Faild to send the event as POST request"),e=r,n=fullUrlGetMethod,e.debugMsg("Sending event as image"),e=document.createElement("img"),o=x(),e.setAttribute("id",o),e.setAttribute("src",n),e.setAttribute("height","1"),e.setAttribute("width","1"),e.style.display="none",document.body.appendChild(e),setTimeout(function(){var e=document.getElementById(o);e&&e.remove()},100))})}}else r.debugMsg("The argument have to be Array with objects")},m.prototype.http=function(p,e,t,n,o,r,d){function i(e,t){var n,o,r,i,a,s,g,c,l,u;v||(n=h,r=y,i=p,a=t,s=m,g=f,c=(o=e)?"info":"error",l=null,u=new Date,a.target&&(l=a.target.status),n.debugMsg("HTTP callback ",{success:o,status:l,url:r}),n.send([{Level:c,Message:"networkLog",Performance_RequestTime:u-s,Request_Url:r,Request_Method:i,Request_Status:l,Request_Id:g}])),d(e,t)}var f,a,h=this,v=-1<e.indexOf(h.logUrl),m=new Date,h=this,y=e,s=(v||(f=x(),a=-1<e.indexOf("?")?"&":"?",e=e+a+"client_request_id="+f),new XMLHttpRequest);try{s.open(p,e)}catch(e){return void i(!1,e)}"object"==typeof t&&Object.keys(t).forEach(function(e){s.setRequestHeader(e,t[e])}),"json"==n&&s.setRequestHeader("Content-Type","application/json; charset=utf-8"),o&&(s.timeout=o),s.onprogress=function(){},s.ontimeout=function(e){i(!1,e)},s.onerror=function(e){i(!1,e)},s.onreadystatechange=function(e){},s.onload=function(e){e&&e.target&&0!=e.target.status&&e.target.status<300?i(!0,e):i(!1,e)},s.send(r)},m.prototype.load=!0,m.prototype.SessionGuid=f(m),m.prototype.init=function(){this.logUrl=g[this.environment]+this.config.ApplicationIdentifier,this.debugMsg("Log mode: "+this.environment),e(this)},u.etoroLogger=m,(v=u[s])&&Object.keys(v).forEach(function(e){var t=e,e=v[e],n=e.actionsRecorder,o=(u[s][t]=new m,u[s][t]);if(m.apply(o,e.settings),n)for(i=0;i<n.length;i++){var r=n[i],a=r[0];r.shift(),o[a]&&o[a].apply(o,r)}})})(window,"etoroLoggerApps");